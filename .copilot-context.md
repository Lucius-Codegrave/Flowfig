# Copilot Context - Flowfig Project

## 📋 Project Overview

- **Name**: Flowfig - Task Management API
- **Tech Stack**: Node.js, Express, TypeScript, Prisma, PostgreSQL, Jest
- **Architecture**: Clean Architecture avec services, controllers, middlewares
- **Database**: PostgreSQL avec Prisma ORM
- **Testing**: Jest avec mocks complets

## 🏗️ Project Structure

```text
flowfig/
├── src/
│   ├── app.ts                 # Express app setup
│   ├── config/
│   │   ├── db.ts             # Prisma client
│   │   └── env.ts            # Environment variables
│   ├── controllers/          # Express route handlers
│   ├── services/             # Business logic layer
│   ├── middlewares/          # Express middlewares
│   ├── routes/               # Route definitions
│   └── validators/           # Zod schemas
├── prisma/
│   └── schema.prisma         # Database schema
├── API.md                    # Complete API documentation
└── README.md                 # Project setup
```

## 🎯 Key Features Implemented

- ✅ User authentication (register/login) with JWT
- ✅ Task CRUD operations with user isolation
- ✅ Complete API documentation with curl examples
- ✅ Comprehensive test coverage
- ✅ Error handling middleware
- ✅ Input validation with Zod
- ✅ Security middleware (auth, CORS)

## 🧪 Testing Philosophy

- **Pattern**: Given-When-Then with extensive comments
- **Coverage**: Controllers, Services, Middlewares, Validators
- **Mocking**: Jest mocks for Prisma, bcrypt, jsonwebtoken
- **Security**: All tests verify user isolation and permissions

## 🔐 Security Patterns

- JWT authentication with Bearer tokens
- User isolation: users can only access their own tasks
- Password hashing with bcrypt
- Input validation with Zod schemas
- Error handling with custom AppError class

## 📝 Code Quality Standards

- **Comments**: Comprehensive JSDoc for all functions
- **Types**: Full TypeScript with interfaces
- **Error Handling**: Centralized with errorHandler middleware
- **Testing**: Given-When-Then pattern with detailed comments
- **Git**: Proper commit messages and documentation

## 🚀 Recent Work

- Created complete API documentation (API.md)
- Fixed all markdown lint issues
- Implemented comprehensive test suite
- Set up proper git workflow
- Explained Express middleware patterns and error handling

## 💡 User Preferences

- Préfère les explications en français
- Aime comprendre les concepts en profondeur
- Apprécie les commentaires détaillés dans le code
- Utilise le pattern Given-When-Then pour les tests

## 🔧 Development Setup

- Working directory: `flowfig/` (pas le parent)
- Package manager: pnpm
- Database: PostgreSQL avec Prisma
- Test runner: Jest
- Linting: ESLint avec règles markdown

## 📚 Key Files to Read for Context

1. `API.md` - Complete API documentation
2. `TODO.md` - Current development priorities
3. `src/app.ts` - Express application setup
4. `src/middlewares/error.middleware.ts` - Error handling patterns
5. Test files - Comprehensive testing examples

## 🎯 Next Steps (from TODO.md)

- Expand test coverage for untested components
- Add integration tests
- Implement rate limiting
- Add logging middleware
- Consider API versioning

---
*Last updated: July 14, 2025*
*This file helps Copilot understand the project context in new sessions*
