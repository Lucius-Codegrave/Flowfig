# Copilot Context - Flowfig Project

## ğŸ“‹ Project Overview

- **Name**: Flowfig - Task Management API
- **Tech Stack**: Node.js, Express, TypeScript, Prisma, PostgreSQL, Jest
- **Architecture**: Clean Architecture avec services, controllers, middlewares
- **Database**: PostgreSQL avec Prisma ORM
- **Testing**: Jest avec mocks complets

## ğŸ—ï¸ Project Structure

```text
flowfig/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.ts                 # Express app setup
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ db.ts             # Prisma client
â”‚   â”‚   â””â”€â”€ env.ts            # Environment variables
â”‚   â”œâ”€â”€ controllers/          # Express route handlers
â”‚   â”œâ”€â”€ services/             # Business logic layer
â”‚   â”œâ”€â”€ middlewares/          # Express middlewares
â”‚   â”œâ”€â”€ routes/               # Route definitions
â”‚   â””â”€â”€ validators/           # Zod schemas
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma         # Database schema
â”œâ”€â”€ API.md                    # Complete API documentation
â””â”€â”€ README.md                 # Project setup
```

## ğŸ¯ Key Features Implemented

- âœ… User authentication (register/login) with JWT
- âœ… Task CRUD operations with user isolation
- âœ… Complete API documentation with curl examples
- âœ… Comprehensive test coverage
- âœ… Error handling middleware
- âœ… Input validation with Zod
- âœ… Security middleware (auth, CORS)

## ğŸ§ª Testing Philosophy

- **Pattern**: Given-When-Then with extensive comments
- **Coverage**: Controllers, Services, Middlewares, Validators
- **Mocking**: Jest mocks for Prisma, bcrypt, jsonwebtoken
- **Security**: All tests verify user isolation and permissions

## ğŸ” Security Patterns

- JWT authentication with Bearer tokens
- User isolation: users can only access their own tasks
- Password hashing with bcrypt
- Input validation with Zod schemas
- Error handling with custom AppError class

## ğŸ“ Code Quality Standards

- **Comments**: Comprehensive JSDoc for all functions
- **Types**: Full TypeScript with interfaces
- **Error Handling**: Centralized with errorHandler middleware
- **Testing**: Given-When-Then pattern with detailed comments
- **Git**: Proper commit messages and documentation

## ğŸš€ Recent Work

- Created complete API documentation (API.md)
- Fixed all markdown lint issues
- Implemented comprehensive test suite
- Set up proper git workflow
- Explained Express middleware patterns and error handling

## ğŸ’¡ User Preferences

- PrÃ©fÃ¨re les explications en franÃ§ais
- Aime comprendre les concepts en profondeur
- ApprÃ©cie les commentaires dÃ©taillÃ©s dans le code
- Utilise le pattern Given-When-Then pour les tests

## ğŸ”§ Development Setup

- Working directory: `flowfig/` (pas le parent)
- Package manager: pnpm
- Database: PostgreSQL avec Prisma
- Test runner: Jest
- Linting: ESLint avec rÃ¨gles markdown

## ğŸ“š Key Files to Read for Context

1. `API.md` - Complete API documentation
2. `TODO.md` - Current development priorities
3. `src/app.ts` - Express application setup
4. `src/middlewares/error.middleware.ts` - Error handling patterns
5. Test files - Comprehensive testing examples

## ğŸ¯ Next Steps (from TODO.md)

- Expand test coverage for untested components
- Add integration tests
- Implement rate limiting
- Add logging middleware
- Consider API versioning

---
*Last updated: July 14, 2025*
*This file helps Copilot understand the project context in new sessions*
